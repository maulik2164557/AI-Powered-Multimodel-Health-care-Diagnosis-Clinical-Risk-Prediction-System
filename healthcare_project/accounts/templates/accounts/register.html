{% extends 'base/base_public.html' %}

{% block content %}
<h2>User Registration</h2>

<form method="POST">
    {% csrf_token %}

    {{ form.username.label_tag }} {{ form.username }}<br>
    {{ form.email.label_tag }} {{ form.email }}<br>
    {{ form.full_name.label_tag }} {{ form.full_name }}<br>
    {{ form.date_of_birth.label_tag }} {{ form.date_of_birth }}<br>
    {{ form.gender.label_tag }} {{ form.gender }}<br>
    {{ form.phone_number.label_tag }} {{ form.phone_number }}<br>
    {{ form.address.label_tag }} {{ form.address }}<br>
    {{ form.role.label_tag }} {{ form.role }}<br>

    <div id="doctor-fields" style="display:none;">
        {{ form.specialization.label_tag }} {{ form.specialization }}<br>
        {{ form.license_number.label_tag }} {{ form.license_number }}<br>
    </div>

    {{ form.password1.label_tag }} {{ form.password1 }}<br>
    {{ form.password2.label_tag }} {{ form.password2 }}<br>

    <button type="submit">Register</button>
</form>

{% for message in messages %}
    <p style="color:red;">{{ message }}</p>
{% endfor %}

{% if form.errors %}
    <div style="color:red;">
        {{ form.errors }}
    </div>
{% endif %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const roleField = document.getElementById("id_role");
        const doctorFields = document.getElementById("doctor-fields");

        function toggleDoctorFields() {
            console.log("Doctor selected");
            if (roleField.value === "DOCTOR") {
                doctorFields.style.display = "block";
            } else {
                doctorFields.style.display = "none";
            }
        }

        roleField.addEventListener("change", toggleDoctorFields);
        toggleDoctorFields(); 
    });
</script>

{% endblock %}


