{% extends "base/base_patient.html" %} {% block content %}

<h2>Your Medical History</h2>

<div style="margin-bottom: 20px">
  <a href="{% url 'medical_history:add_log' %}" class="btn">â• Add Log</a>
  <a href="{% url 'medical_history:upload_document' %}" class="btn"
    >ğŸ“„ Upload Document</a
  >
</div>

<hr />

{% if records %} {% for record in records %}
<div
  style="
    padding: 15px;
    border: 1px solid #ccc;
    margin-bottom: 10px;
    border-radius: 8px;
  "
>
  <strong>
    {% if record.file %} ğŸ“„ Document {% else %} ğŸ“ Log {% endif %}
  </strong>

  <h4>{{ record.title }}</h4>

  {% if record.description %}
  <p>{{ record.description }}</p>
  {% endif %}

  <div style="margin-top: 8px">
    <small> ğŸ“… Uploaded: {{ record.created_at|date:"d M Y, h:i A" }} </small>
    <br />
    <small> âœ Last Updated: {{ record.updated_at|date:"d M Y, h:i A" }} </small>
  </div>

  <div style="margin-top: 10px">
    {% if record.file %}
        <a href="{% url 'medical_history:update_document' record.id %}">âœ Update</a> |

        <form method="post"
              action="{% url 'medical_history:delete_document' record.id %}"
              style="display:inline;">
            {% csrf_token %}
            <button type="submit"
                    style="border:none; background:none; color:red; cursor:pointer;">
                ğŸ—‘ Delete
            </button>
        </form>

    {% else %}
        <a href="{% url 'medical_history:update_log' record.id %}">âœ Update</a> |

        <form method="post"
              action="{% url 'medical_history:delete_log' record.id %}"
              style="display:inline;">
            {% csrf_token %}
            <button type="submit"
                    style="border:none; background:none; color:red; cursor:pointer;">
                ğŸ—‘ Delete
            </button>
        </form>
    {% endif %}
</div>

</div>
{% endfor %} {% else %}
<p>No records yet.</p>
{% endif %} {% endblock %}
